<div class="tab-pane fade" id="data-query" role="tabpanel" aria-labelledby="data-query-tab">
    <div class="card shadow-sm">
        <div class="card-header bg-light">
            <h2 class="card-title h5 mb-0">数据查询</h2>
        </div>
        <div class="card-body">
            <!-- 查询条件 -->
            <form id="queryForm" class="mb-4">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="queryIncidentType" class="form-label">类型</label>
                        <select class="form-select" id="queryIncidentType" onchange="handleQueryTypeChange()">
                            <option value="">请选择类型</option>
                            <option value="accident">事故</option>
                            <option value="case">案件</option>
                            <option value="suicide">自杀</option>
                            <option value="hazard">问题隐患</option>
                        </select>
                    </div>
                    <div class="col-md-6" id="queryAccidentSubTypeDiv" style="display: none;">
                        <label for="queryAccidentSubType" class="form-label">事故类型</label>
                        <select class="form-select" id="queryAccidentSubType">
                            <option value="">全部</option>
                            <option value="military">军队事故</option>
                            <option value="social">社会事故</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="queryDateRange" class="form-label">时间范围</label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="queryStartDate">
                            <span class="input-group-text">至</span>
                            <input type="date" class="form-control" id="queryEndDate">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="queryUnit" class="form-label">单位</label>
                        <div id="queryUnitContainer"></div>
                    </div>
                    
                    <!-- 问题隐患查询条件 -->
                    <div class="row g-3" id="hazardQueryConditions" style="display: none;">
                        <div class="col-md-6">
                            <label for="queryHazardType" class="form-label">检查类型</label>
                            <select class="form-select" id="queryHazardType">
                                <option value="">全部</option>
                                <option value="chief">首长检查</option>
                                <option value="daily">日常检查</option>
                                <option value="comprehensive">综合检查</option>
                                <option value="other">其他</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="queryProblemCategory" class="form-label">问题类别</label>
                            <div id="queryProblemCategoryContainer"></div>
                        </div>
                    </div>
                    
                    <!-- 问题隐患以外查询条件 -->
                    <div class="row g-3" id="otherQueryConditions" style="display: none;">
                        <div class="col-md-6">
                            <label for="queryOtherProblemCategory" class="form-label">问题类别</label>
                            <div id="queryOtherProblemCategoryContainer"></div>
                        </div>
                        <div class="col-md-6">
                            <label for="queryProblemLevel" class="form-label">问题等级</label>
                            <div id="queryProblemLevelContainer"></div>
                        </div>
                    </div>
                    
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary me-2">
                            <i class="bi bi-search me-1"></i>查询
                        </button>
                        <button type="reset" class="btn btn-secondary me-2">
                            <i class="bi bi-arrow-clockwise me-1"></i>重置
                        </button>
                        <button type="button" class="btn btn-success" onclick="exportToExcel()">
                            <i class="bi bi-file-earmark-excel me-1"></i>导出Excel
                        </button>
                    </div>
                </div>
            </form>

            <!-- 查询结果 -->
            <div id="queryResults" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="h6 mb-0">查询结果</h3>
                    <span class="text-muted" id="resultCount"></span>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="resultsTable">
                        <thead class="table-dark">
                            <tr>
                                <th>序号</th>
                                <th>类型</th>
                                <th>时间</th>
                                <th>单位</th>
                                <th>问题描述</th>
                                <th>原因分析</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody">
                            <!-- 动态生成的结果行 -->
                        </tbody>
                    </table>
                </div>
                <!-- 分页器 -->
                <nav aria-label="查询结果分页" class="mt-4">
                    <ul class="pagination justify-content-center" id="paginationContainer">
                        <!-- 分页器内容由 pagination.js 动态生成 -->
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
